# 5-дневный итеративный план выполнения тестового задания (MVP-подход)

Стек: Qt6, C++ (логика), QOpenGLWidget (визуализация), Qt Concurrent (многопоточность), QtXml (парсинг KML)

## Пятница (3): MVP — "База QOpenGLWidget"
**Цель**: понять, как работает OpenGL в Qt6 и как рисовать примитивы.

**Что сделать:**
- Создать проект на qmake + Qt6
- Подключить модули: Core, Gui, Widgets, OpenGL
- Реализовать QOpenGLWidget с переопределёнными initializeGL() и paintGL()
- Нарисовать простой квадрат или линию (через glBegin/glEnd или VBO + glDrawArrays)
- Убедиться, что окно запускается и отображает геометрию

**Результат:**  
Приложение запускается → в центре окна отображается чёрный квадрат или линия.  
Понимание базового цикла отрисовки в OpenGL.

## Суббота (4): MVP — "Загрузка и отображение KML"
**Цель**: прочитать KML и отобразить полигон как ломаную линию.

**Что сделать:**
- Подключить модуль Qt6::Xml
- Написать парсер на основе QDomDocument: извлечь содержимое тега `<coordinates>`
- Преобразовать lat/lon в QPointF (на этом этапе — нормализация в диапазон [-1, 1])
- Передать точки в QOpenGLWidget
- Нарисовать полигон через GL_LINE_LOOP

**Результат:**  
Загружен KML → на экране отображён контур полигона (чёрный).

## Воскресенье (5): MVP — "Алгоритм упрощения в фоне"
**Цель**: реализовать алгоритм Ramer–Douglas–Peucker и запустить его без блокировки UI.

**Что сделать:**
- Реализовать функцию simplifyPolygon(const std::vector<Point2D>&, double epsilon_meters)
  - Использовать перпендикулярное расстояние от точки до отрезка
  - Преобразовать входные координаты в метрическую систему (через центральную точку и радиус Земли ≈ 6371000 м)
- Запустить упрощение через QtConcurrent::run()
- Подключить QFutureWatcher → по завершении обновить отображение
- Нарисовать упрощённый полигон зелёным цветом

**Результат:**  
Нажата кнопка "Упростить" → через несколько секунд появился зелёный контур с меньшим числом точек.  
Интерфейс остаётся отзывчивым.

## Понедельник (6): MVP — "Навигация: панорамирование и масштаб"
**Цель**: сделать карту интерактивной.

**Что сделать:**
- В QOpenGLWidget реализовать:
  - mousePressEvent + mouseMoveEvent → сдвиг (panX, panY)
  - wheelEvent → изменение масштаба (zoom)
- Обновлять ортогональную проекцию или применять трансформацию при отрисовке
- Обеспечить плавное перемещение и масштабирование

**Результат:**  
Возможно перемещение по карте перетаскиванием мыши и масштабирование колёсиком.

## Вторник (7): MVP — "Сохранение + тайлы (опционально)"
**Цель**: завершить цикл и добавить профессиональные элементы.

**Что сделать:**
- Реализовать экспорт: создать новый KML через QDomDocument, скопировав структуру исходного файла и заменив `<coordinates>` на упрощённые
- (Опционально) Подгрузить тайлы OpenStreetMap:
  - Использовать QNetworkAccessManager для запроса https://tile.openstreetmap.org/{z}/{x}/{y}.png
  - Отобразить тайлы как фоновую текстуру под полигонами

**Результат:**  
Полный цикл: загрузка → визуализация → упрощение → навигация → сохранение.  
(При наличии времени) — приложение визуально напоминает профессиональный ГИС-инструмент.